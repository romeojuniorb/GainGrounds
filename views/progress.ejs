<header><%- layout('layouts/boilerplate') %></header>
<h1 class="text-center mb-3">Your Progress:</h1>

<!-- <div class="container">
  <div class="row">
    <div class="col-md-4 mb-3">
      <div class="card text-center">
        <div class="card-body">
          <h5 class="card-title">Total Sessions</h5>
          <p class="card-text"><%= lifts.length + measurements.length %></p>
        </div>
      </div>
    </div>
        <div class="col-md-4 mb-3">
          <div class="card text-center">
            <div class="card-body">
              <h5 class="card-title">Average Weight Recorded</h5>
              <p class="card-text">
                <% 
                let totalWeight = measurements.reduce((acc, cur) => acc + cur.weight, 0);
                let avgWeight = measurements.length > 0 ? (totalWeight / measurements.length).toFixed(2) : 0;
                %>
                <%= avgWeight %> lbs
              </p>
            </div>
          </div>
        </div>
      </div>
  </div> -->

  <div class="accordion">

    <article>
      <input id="article1" type="radio" name="articles" checked>
      <label for="article1">
        <h2>Title 1</h2>
      </label>
      <div>
        Lorem ipsum dolor sit amet consectetur adipisicing elit. Pariatur veritatis fugiat possimus hic doloremque sint reiciendis? Quasi beatae explicabo qui quod atque a iste. Explicabo inventore quo expedita tempore amet!
      </div>
    </article>
  
    <article>
      <input id="article2" type="radio" name="articles">
      <label for="article2">
        <h2>Title 2</h2>
      </label>
      <div>
        Lorem ipsum dolor sit amet consectetur adipisicing elit. Pariatur veritatis fugiat possimus hic doloremque sint reiciendis? Quasi beatae explicabo qui quod atque a iste. Explicabo inventore quo expedita tempore amet!
      </div>
    </article>
  
    <article>
      <input id="article3" type="radio" name="articles">
      <label for="article3">
        <h2>Title 3</h2>
      </label>
      <div>
        Lorem ipsum dolor sit amet consectetur adipisicing elit. Pariatur veritatis fugiat possimus hic doloremque sint reiciendis? Quasi beatae explicabo qui quod atque a iste. Explicabo inventore quo expedita tempore amet!
      </div>
    </article>
  
    <article>
      <input id="article4" type="radio" name="articles">
      <label for="article4">
        <h2>Title 4</h2>
      </label>
      <div>
        Lorem ipsum dolor sit amet consectetur adipisicing elit. Pariatur veritatis fugiat possimus hic doloremque sint reiciendis? Quasi beatae explicabo qui quod atque a iste. Explicabo inventore quo expedita tempore amet!
      </div>
    </article>
  
  </div>
  
  <% if(lifts.length > 0) { %>
    <div class="card mb-3">
      <div class="card-header" role="tab" id="headingLifts">
        <h5 class="mb-0">
          <a data-toggle="collapse" href="#collapseLifts" aria-expanded="true" aria-controls="collapseLifts">
            Lifts Details
          </a>
        </h5>
      </div>

      <div id="collapseLifts" class="collapse show" role="tabpanel" aria-labelledby="headingLifts">
        <div class="card-body">
          <table class="table table-striped table-bordered table-hover text-center">
            <thead>
              <tr>
                <th scope="col">#</th>
                <th scope="col">Bench Press (lbs)</th>
                <th scope="col">Squat (lbs)</th>
                <th scope="col">Deadlift (lbs)</th>
              </tr>
            </thead>
            <tbody>
              <% lifts.forEach(function(lift, index) { %>
                <tr>
                  <th scope="row"><%= index + 1 %></th>
                  <td><%= lift.bench.weightLifted %></td>
                  <td><%= lift.squat.weightLifted %></td>
                  <td><%= lift.deadlift.weightLifted %></td>
                </tr>
              <% }); %>
            </tbody>
          </table>
        </div>
      </div>
    </div>
  <% } else { %>
    <h3 class="text-center">No lift records added</h3>
  <% } %>

  <% if(measurements.length > 0) { %>
    <div class="card mb-3">
      <div class="card-header" role="tab" id="headingMeasurements">
        <h5 class="mb-0">
          <a data-toggle="collapse" href="#collapseMeasurements" aria-expanded="false" aria-controls="collapseMeasurements">
            Body Measurements Details
          </a>
        </h5>
      </div>
  
      <div id="collapseMeasurements" class="collapse" role="tabpanel" aria-labelledby="headingMeasurements">
        <div class="card-body">
          <table class="table table-striped table-bordered table-hover text-center">
            <thead>
              <tr>
                <th scope="col">#</th>
                <th scope="col">Weight (lbs)</th>
              </tr>
            </thead>
            <tbody>
              <% measurements.forEach(function(measurement, index) { %>
                <tr>
                  <th scope="row"><%= index + 1 %></th>
                  <td><%= measurement.weight %></td>
                </tr>
              <% }); %>
            </tbody>
          </table>
        </div>
      </div>
    </div>
  <% } else { %>
    <h3 class="text-center">No body measurements added</h3>
  <% } %>
  
  <div class="text-center mb-3">
    <a class="btn btn-primary mb-3" href="/lifts">Enter new lifts</a>
    <a class="btn btn-primary" href="/bodyMeasurements">Enter body measurements</a>
  </div>
</div>
